<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8">
  <title>紅鼻子抽籤</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
    }
    body {
      background: url('https://i.meee.com.tw/dczdKgU.png') no-repeat center center;
      background-size: cover;
      position: relative;
      overflow: hidden;
      font-family: Arial, sans-serif;
      cursor: pointer;
    }

    #tip {
      position: absolute;
      top: 50%;
      right: 30px; 
      transform: translateY(-50%);
      font-size: 2rem;
      color: white;
      text-shadow: 1px 1px 4px black;
      z-index: 20;
      display: none;
      writing-mode: vertical-rl; 
      text-orientation: upright; 
    }

    #drawButton {
      position: absolute;
      top: calc(42% - 60px);   
      left: calc(63% + 140px - 7.5px);
      width: 30px;
      height: 30px;
      background: red;
      border: none;
      border-radius: 50%;
      cursor: pointer;
      z-index: 10;
      transition: transform 0.2s ease, background 0.2s ease;
    }
    #drawButton:hover {
      background: darkred;
      transform: scale(1.2);
    }

    #resultImage {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: none;
      z-index: 5;
      transition: opacity 0.5s ease;
      opacity: 0;
    }
    #resultImage.show {
      opacity: 1;
    }
  </style>
</head>
<body>

  <div id="tip">點螢幕任意地方再一次</div>
  <button id="drawButton"></button>
  <img id="resultImage" src="" alt="">

  <script>
    const images = [
      "https://i.meee.com.tw/dt1U8Is.png",
      "https://i.meee.com.tw/w7Rzbww.png",
      "https://i.meee.com.tw/WOmw3cy.png",
      "https://i.meee.com.tw/0O9gcE4.png"
    ];

    images.forEach(src => new Image().src = src);

    const drawButton = document.getElementById("drawButton");
    const result = document.getElementById("resultImage");
    const tip = document.getElementById("tip");

    let drawn = false;

    drawButton.addEventListener("click", (e) => {
      e.stopPropagation();
      if (drawn) return;
      drawn = true;

      const randomIndex = Math.floor(Math.random() * images.length);
      result.src = images[randomIndex];
      result.style.display = "block";
      result.classList.add("show");

      drawButton.style.display = "none";
      tip.style.display = "block";
    });

    document.body.addEventListener("click", () => {
      if (!drawn) return;
      result.style.display = "none";
      result.classList.remove("show");
      drawButton.style.display = "block";
      drawn = false;
      tip.style.display = "none"; 
    });
  </script>

</body>
</html>

<script>
  function createParticles(x, y) {
    for (let i = 0; i < 20; i++) {
      const particle = document.createElement('div');
      particle.style.position = 'absolute';
      particle.style.width = '8px';
      particle.style.height = '8px';
      particle.style.borderRadius = '50%';
      particle.style.background = `hsl(${Math.random()*360}, 100%, 50%)`;
      particle.style.left = x + 'px';
      particle.style.top = y + 'px';
      particle.style.pointerEvents = 'none';
      particle.style.zIndex = 30;
      document.body.appendChild(particle);

      const angle = Math.random() * 2 * Math.PI;
      const distance = Math.random() * 100 + 50;

      particle.animate([
        { transform: `translate(0, 0) scale(1)`, opacity: 1 },
        { transform: `translate(${Math.cos(angle)*distance}px, ${Math.sin(angle)*distance}px) scale(0)`, opacity: 0 }
      ], {
        duration: 800 + Math.random()*400,
        easing: 'ease-out',
        fill: 'forwards'
      });

      setTimeout(() => particle.remove(), 1200);
    }
  }

  drawButton.addEventListener("click", (e) => {
    const rect = drawButton.getBoundingClientRect();
    const centerX = rect.left + rect.width / 2;
    const centerY = rect.top + rect.height / 2;
    createParticles(centerX, centerY);
  });
</script>
